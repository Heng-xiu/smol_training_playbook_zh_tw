### [飛行前檢查清單:按下「訓練」前要驗證什麼](https://huggingfacetb-smol-training-playbook.hf.space/#pre-flight-checklist-what-to-verify-before-hitting-train)

在按下「訓練」之前,我們會檢查一個清單以確保一切端到端地工作:
**基礎設施準備:**
  - 如果你的叢集支援 Slurm 保留,請使用它們。對於 SmolLM3,我們為整個執行有一個固定的 48 節點保留。這意味著沒有排隊延遲、一致的輸送量,以及隨時間追蹤節點健康的能力。
  - 在啟動前對 GPU 進行壓力測試(我們使用 [GPU Fryer](https://github.com/huggingface/gpu-fryer) 和 [DCGM Diagnostics](https://docs.nvidia.com/datacenter/dcgm/latest/user-guide/dcgm-diagnostics.html))以捕獲節流或效能降低。對於 SmolLM3,我們發現兩個 GPU 正在節流,並在開始執行前更換了它們。
  - 避免儲存膨脹:我們的系統將每個檢查點上傳到 S3,然後在儲存下一個檢查點後立即刪除本機副本,因此我們永遠不會在快速本機 GPU SSD 上儲存超過一個。
**評估設置:** 評估是看似簡單實則耗時的。即使一切都已實作,手動執行它們、記錄結果和製作圖表每次都會耗費數小時。所以嘗試完全自動化它們,並確保它們在執行開始前正確執行和記錄。對於 SmolLM3,每個儲存的檢查點都會自動觸發叢集上的評估作業,並記錄到 Wandb 和 [Trackio](https://github.com/gradio-app/trackio)。
**檢查點和自動恢復系統:** 驗證檢查點是否正確儲存,以及訓練作業是否可以從最新的檢查點恢復而無需手動介入。在 Slurm 上,我們使用 `--requeue` 選項,因此失敗的作業會自動重新啟動,從最近的檢查點恢復。
**指標記錄:** 確認你正在記錄所有你關心的指標:評估分數、輸送量(tokens/sec)、訓練損失、梯度範數、節點健康(GPU 利用率、溫度、記憶體使用),以及任何特定於你執行的自訂除錯指標。
**訓練配置健全性檢查:** 仔細檢查你的訓練配置、啟動腳本和 Slurm 提交命令。
基礎設施深入探討
有關 GPU 測試、儲存基準測試、監控設置和建立彈性訓練系統的詳細指南,請參閱[基礎設施章節](https://huggingfacetb-smol-training-playbook.hf.space/#infrastructure---the-unsung-hero)。
